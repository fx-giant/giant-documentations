# Giant Visual Sandbox

## Prequisities

Visual sandbox is a tool providing easiness in developing visual. On how to setup the visual sandbox workspace, please refer to [Visual Sandbox Documentation](https://github.com/fx-giant/generator-giant-visual-sandbox). By following this guide, you will be able to easily generate a workspace with these features:
- **npm run save** : single command to zip the entire visual pack, usefull for keeping track of versioning.
- **npm run upload**: single command to upload the entire visual pack, usefull for testing the visuals in GIANT environment.

# How To Use

Assuming that you already setup the workspace generated by the visual sandbox, you will have a folder with the structure as follow:

```
{package-name}
|-source
|   |-config.json
|   |-sample.css
|   |-sample.js
|   |-quadrant-properties-sample.html
|   \-quadrant-properties-sample.js
|
|-packs
|-config.json
|-package.json
\-packer.js
```

What are they?
- **source**: this is the folder where your development will take place. the packaging and uploading of the visual will be taken from this folder. For the detailed explanation about what are you going to do with this folder, please refer to [Visual Pack](http://https://github.com/fx-giant/giant-documentations/blob/master/visual-pack.md) documentation
- **pack**: this is the folder where the zip files will be saved when you execute **npm run save**
- **config.json**: this is the place where your configuration will take for, explained more later
- **package.json**: npm package dependencies and scripts list
- **packer.js**: script to do the packaging and uploading, most of the time you will not touch this file anyway.

## config.json

by default, the content of config json will look like this:
```js
{
  "sourceFolder": "source",      //source folder, of which one is the folder that will be zipped and uploaded
  "cookie": null,               // this is mandatory to be set if you want to use "npm run upload"
  "target": "SIT",              // which preset going to be used to upload the giant form to, 
  "targetUrl": null,            // if you are going to upload to specific environment, please see bellow explanation for setup this variable
  "saveDirectory": "packs"      // the location of zipped file to be saved when running "npm run save"
}
```

Here i will explain 2 most used configuration that will be set, which is:
- cookie
- targetUrl

## Cookie
This is an **absolutely mandatory** field to be configured if you want to use the command **"npm run upload"**. Here is the step to get the value to set this. For this tutorial i will use Google Chrome as example:
1. Login to your GIANT
2. Open browser developer tools, usually F12
3. Go to network, you will see some items there, if you dont see any items, press F5 to refresh your browser.

![Network List](./images/visual-sandbox/visual-sandbox-1.png)

4. Click any of the item to see the request sent to the server, take the request cookie

![Request Cookie](./images/visual-sandbox/visual-sandbox-2.png)

5. put the value right into the "cookie" in config.json
``` js
{
  "sourceFolder": "source",      
  "cookie": "put the cookie here, should be like: .AspNet.ApplicationCookie=8JpsU ...... 5WrNAltkF7yKMFMqm_hYQQr-FdGg",               
  "target": "SIT",              
  "targetUrl": null,            
  "saveDirectory": "packs"      
}
```
Note:
- in this case, my current cookie is as follow: **.AspNet.ApplicationCookie=8JpsUSB-SAJYH  .... r-FdGg**, the cookies will be always started with the **.AspNet.ApplicationCookie=** and the subsequence content will be vary based on user session.
## Target URL
1. get the server's base URL, example of GIANT's SG Alpha URL: 
```https://giant2016-csgb.fusionexsite.com/AnalyticsI/```
2. append ```api/VisualPack/Upload```
3. example end result will be: ```https://giant2016-csgb.fusionexsite.com/AnalyticsI/api/VisualPack/Upload``` 
